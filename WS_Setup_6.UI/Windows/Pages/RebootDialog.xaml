<Window x:Class="WS_Setup_6.UI.Windows.RebootDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Title="Reboot now?"
        Background="Transparent"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner">

    <!-- keep your WindowChrome definition on the Window -->
    <WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="25"
                            ResizeBorderThickness="8"
                            GlassFrameThickness="0"
                            CornerRadius="3" />
    </WindowChrome.WindowChrome>

    <!-- now draw your own window “chrome” -->
    <Border Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
            BorderBrush="LightGray"
            BorderThickness="1"
            CornerRadius="3">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="25" />
                <!-- your title‐bar height -->
                <RowDefinition />
                <!-- content -->
            </Grid.RowDefinitions>

            <!-- your custom title bar -->
            <Border Grid.Row="0"
                    Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <TextBlock Text="{Binding Title, RelativeSource={RelativeSource AncestorType=Window}}"
                           VerticalAlignment="Center"
                           Margin="10,0" />
            </Border>

            <!-- the rest of your dialog -->
            <StackPanel Grid.Row="1"
                        Margin="20"
                        Width="300">
                <TextBlock Text="A reboot is required to finalize changes."
                           TextWrapping="Wrap"
                           Margin="0,0,0,20"
                           HorizontalAlignment="Center" />

                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <Button Content="Reboot"
                            IsDefault="True"
                            Width="80"
                            Margin="0,0,10,0"
                            Click="Reboot_Click" />
                    <Button Content="Exit"
                            IsCancel="True"
                            Width="80" />
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Window>